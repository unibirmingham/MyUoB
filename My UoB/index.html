<!DOCTYPE html>
<html>
<head>
    <title>My UoB</title>
    <meta charset="utf-8" />
    <link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />
    <link href="fonts/font-awesome.min.css" rel="stylesheet" />
    <link href="styles/main.css" rel="stylesheet" />
    <link href="styles/guide.css" rel="stylesheet" />
    <link href="styles/location.css" rel="stylesheet" />
    <script src="cordova.js"></script>
    
    <!--
    <script>
        if (window.navigator.simulator)
        {
                cordova.define("cordova/base64", function(require, exports, module) {
                        exports.fromArrayBuffer = function(argument) { return argument; };           
                });
        }
    </script>
    -->
    <script src="kendo/js/jquery.min.js"></script>
    <script src="kendo/js/kendo.mobile.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=true&region=GB"></script>
    <script type="text/javascript" src="Plugins/GAPlugin-master/www/GAPlugin.js"></script>
    <script src="scripts/location.js"></script>
    <script src="scripts/lib/everlive.all.js"></script>
    <script src="scripts/app.js"></script>
    <!--<script src="scripts/push.js"></script>-->
    
    
</head>
<body onload="initialize();" onunload="goingAway();">
    <!--Home-->
    <div id="tabstrip-home" data-role="view" data-title="Home" data-after-show="homeShow" data-init="homeInit" >
        <div class="offlineMessage warning message" data-transition="slidedown">
            <h3>No network found</h3>
        	<p>Much of this app depends on network availability. Please check network connection and try again.
                <br/>Unavailable functions will be greyed out.</p>
        </div>
        <div class="view-content">
            <ul data-role="listview" datatype="group">
                
                <li><a data-icon="justify" href="#tabstrip-news" class="networkDependent" data-transition="slide">News</a></li>
                <li><a data-icon="cal" href="#tabstrip-events" class="networkDependent" data-transition="slide">Events</a></li>
                <li><a data-icon="twitter" href="#tabstrip-twitter" class="fa networkDependent" data-transition="slide">UoB Twitter Feed</a></li>
                <li><a data-icon="facebook" href="#tabstrip-face" class="fa networkDependent" data-transition="slide">UoB Facebook Posts</a></li>
                <li><a data-icon="globe" href="#tabstrip-location" class="networkDependent" data-transition="slide">Location</a></li>
                <li><a data-icon="organize" href="autopocket.html" data-transition="slide">Pocket Guide</a></li>
                
            </ul>
        </div>
    </div>
    
    <!--Settings view-->
    <div id="tabstrip-settings" data-after-show="settingsShow" data-init="settingsInit" data-role="view" data-title="Settings">
        <div class="view-content">
            <ul id="settingsOptions" data-role="listview" data-style="inset" data-type="group">
                <li id="privacySettings">Privacy Settings
                    		<ul>
        						<li class="info">This app tracks usage, using Google Analytics so that we can learn from user behaviour and provide a better app in the future. No personal or user identifiable data will be collected, but if you would prefer for the app not to collect such data please select OFF below.</li>
                                <li>Usage tracking <input id="usage-tracking-switch" /></li>
        					</ul>
                    		<ul>
        						<li class="info">This app makes use of alerts/push notifications. These will be used only for important announcements so we would urge you to enable them, but if you would prefer not to receive them please select OFF below.</li>
                                <li>Alerts/Push Notifications <input id="push-notifications-switch" /></li>
        					</ul>
                </li>
            </ul>
        </div>
    </div>
    
    <!--Info view-->
    <div id="tabstrip-info" data-role="view" data-after-show="infoShow" data-title="About My UoB">
        <div class="view-content">
            <h2>My UoB Mobile App</h2>
            <p>My UoB is one of a number of official mobile apps from the University of Birmingham, replacing UoB Student.<br/>A full list of University apps is availble on our app store page:</p>
            <ul><li><a onClick="window.open('http://www.birmingham.ac.uk/contact/app-store.aspx', '_system')" href="#tabstrip-info">www.birmingham.ac.uk/contact/app-store.aspx</a></li></ul>
            <h3>Feedback</h3>
            <p>If you have any feedback on My UoB app or need help then either:</p>
            <div data-role="buttongroup" class="feedback_options">
                        <a data-role="button" data-icon="reply" data-iconpos="left" href="feedback.html">Complete a form</a>
                        <a data-role="button" data-icon="email" data-iconpos="left" href="mailto:webservices@lists.bham.ac.uk?subject=MyUob App Feedback" data-rel="external">Send an email</a>
             </div>

        </div>
    </div>
    
    <!-- Alerts screen-->
    <div id="tabstrip-alerts"
        data-role="view"
        data-title="My Alerts"
        data-show="alertListView">
        <!--data-source="alertsData">-->
        <!--data-model="app.alertService.alertModel">-->
        <ul id="alertlistview" data-role="listview" class="alerts-list"></ul> <!--  -->
        <p><a data-click="clearAlerts" data-role="button">Clear Alerts</a> <a data-icon="refresh" data-role="button" onClick="refreshAlertsList();">Refresh</a></p>
    </div>
    
    <!-- Notification modal -->
    <div data-role="modalview" id="modalview-notification" style="width: 90%;" data-modal="false">
	    <div data-role="header">
      	  <div data-role="navbar">
          	  <span>UoB Alert</span>
            	<a data-click="closeModalViewNotification" data-role="button" data-align="right">Cancel</a>
        	</div>
    	</div>
	    <ul data-role="listview" data-style="inset">
    	    <li><span id="notification_message"></span></li>
            <li><span id="notification_date"></span></li>
    	</ul>
	</div>
                
    <!--Events screen-->
    <div id="tabstrip-events" data-role="view" data-show="eventListViewPullWithEndless" data-title="Events" data-init="eventsInit" data-layout="tabstrip-layout-events">
        <ul id="pull-eventslistview" class="events-list"></ul>
    </div>
    
    <!--Events item screen-->
    <div id="singleEventView" data-role="view" data-title="Event" data-show="eventItemView">
        <div id="event-detail">
        </div>
    </div>
    
    <!--News screen-->
    <div id="tabstrip-news" data-role="view" data-title="News" data-show="newsListViewPullWithEndless" data-init="newsInit" data-layout="tabstrip-layout-news">
        <ul id="pull-newslistview" class="news-list"></ul>
        <!--<p>News goes here...</p>-->
    </div>
    
    <!--News item screen-->
    <div id="singleNewsView" data-role="view" data-title="News Item" data-show="newsItemView">
        <div id="news-detail">
        </div>
    </div>
    
    <!--Twitter screen-->
    <div id="tabstrip-twitter" data-role="view" data-title="Tweets" data-show="getTweets">
        <!--<div class="news-title">UoB Twitter Feed</div>-->
        
        <ul id="pull-twitterlistview" class="tweets-list"></ul>
        <!--<p>Tweets go here...</p>-->
    </div>

    <!--FriendFace screen-->
    <div id="tabstrip-face" data-role="view" data-title="Facebook" data-show="getFriendFacePosts">
        
        <ul id="pull-friendfacelistview" class="tweets-list"></ul>
    </div>
    
    <!--Map screen-->
    <div id="tabstrip-location"
        data-role="view"
        data-title="Location"
        data-init="app.locationService.initLocation"
        data-show="app.locationService.show"
        data-hide="app.locationService.hide"
        data-model="app.locationService.viewModel"
        data-stretch="true">

        <div id="no-map" data-bind="invisible: isGoogleMapsInitialized">
            Location requires internet connection to display the map.
        </div>
        <div id="map-search-wrap" data-bind="visible: isGoogleMapsInitialized">
            
            <a id="map-drawer-button" data-role="button" data-rel="drawer" href="#map-drawer" data-icon="drawer-button" title="View Map Features"></a>
            
            <button id="map-navigate-home" data-bind="click: onNavigateHome" title="My location"></button>
            <button id="map-navigate-campus" data-bind="click: onCampusHome" title="Go to Campus"></button>
            <button id="map-clear" data-bind="click: deleteAllMarkers" title="Clear Markers"></button>
            <!--<button id="map-search" data-bind="click: showSearch" title="Search for Building/Address"></button>-->
            <!--<a data-role="button" data-rel="modalview" href="#modalview-search" id="map-search"></a>-->
            <a data-role="button" data-rel="modalview" href="#modalview-buildings" id="map-search-building"></a>
            
            
            
        </div>
        <div id="map-canvas" data-bind="visible: isGoogleMapsInitialized"></div>

    </div>

    <div data-model="app.locationService.viewModel" data-role="modalview" id="modalview-search" style="width: 80%; height: 200px;">
    	<div data-role="header">
        	<div data-role="navbar">
        	    <span>Search</span>
        	    <a data-click="closeModalView" data-role="button" data-align="right">Cancel</a>
        	</div>
    	</div>

    
		<form onsubmit="return false;">
                <input id="map-address" type="search" data-bind="value: address" placeholder="Address" />
                <input id="map-search-but" type="submit" value="search" data-bind="click: onSearchAddress" />
        </form>        
    
        
    </div>
    
    <div data-model="app.locationService.viewModel" data-role="modalview" data-bind="visible: isGoogleMapsInitialized" id="modalview-buildings" style="width: 80%; height: 60%;">
    	<div data-role="header">
        	<div data-role="navbar">
         	    <a data-icon="close" data-click="closeModalView" data-role="button" data-align="right"></a>
        	</div>
    	</div>

    	
        <ul id="filterable-buildings" data-role="listview"></ul>
        
    </div>
    
    
    
<style>
    #modalview-search ul {
            width: 90%;
            margin: 30px auto 20px;
            padding: 0;
            list-style-type: none;
        }
</style>
    
    <!---------------------- MAP DRAWER --------------------------------->
    
    <div class="myUoBDrawer" data-role="drawer" data-swipe-to-open="false" id="map-drawer" style="width: 240px; display:none;" data-views="['tabstrip-location']" 
        data-model="app.locationService.viewModel" data-bind="visible: isGoogleMapsInitialized">
    	<!--<ul data-role="listview" data-type="group">-->
        <h3>Map features</h3>
            <ul data-role="listview" id="map-filters" data-style="inset">
            <li>
                <label>
                    <input class="filterFeature" name="Culture" id="map-feature-culture" type="checkbox" />
                	Culture
            	</label>
            </li>
            <li>
            	<label>
                	<input class="filterFeature" name="Learning and Teaching" id="map-feature-learning" type="checkbox" />
                    <!--<input type="checkbox" id="map-feature-learning" name="Learning and Teaching" data-bind="value: featureType, events: { change: onSearchAddress}" />-->
                	Learning
            	</label>
        	</li>
            <li>
                <label>
                    <input class="filterFeature" name="Retail" id="map-feature-retail" type="checkbox" />
                	Retail
            	</label>
            </li>
            <li>
                <label>
                    <input class="filterFeature" name="Services" id="map-feature-services" type="checkbox" />
                	Services
            	</label>
            </li>
            <li>
                <label>
                    <input class="filterFeature" name="Transport" id="map-feature-transport" type="checkbox" />
                	Transport
            	</label>
            </li>

            </ul>
        
            <ul data-role="listview" data-style="inset" data-type="group" >
        	<li class="setCampusTitle">Set your campus
            <ul>
                <li>
                    <label>
                        <input name="radio" value="Edgbaston" type="radio" data-bind="checked: campus, click: onCampusSelect" />
                        Edgbaston
                    </label>
                </li>
                <li>
                    <label>
                        <input name="radio" value="Dental" type="radio" data-bind="checked: campus, click: onCampusSelect"  />
                        Dental School
                    </label>
                </li>
                <li>
                    <label>
                        <input name="radio" value="Selly" type="radio" data-bind="checked: campus, click: onCampusSelect"  />
                        Selly Oak
                    </label>
                </li>
                
            </ul>
        </li>
    </ul>

    </div>
    
    <!---------------------- NEWS DRAWER --------------------------------->
    
    <div class="myUoBDrawer" data-role="drawer" data-swipe-to-open="true" id="news-drawer" style="width: 240px; display:none;" data-position="right" data-views="['tabstrip-news']" >
        <!--data-model="app.locationService.viewModel" data-bind="visible: isGoogleMapsInitialized">-->
    	
        <h3>News filters</h3>
            <ul data-role="listview" id="news-filters" data-style="inset">
                        <li><label><input id="student-news-switch" />Student News</label></li>
                        <li><label><input id="research-news-switch" />Research News</label></li>
                        <li><label><input id="sport-news-switch" />Sport News</label></li>          
            </ul>
            
    </div>
    
    <!---------------------- EVENTS DRAWER --------------------------------->
    
    <div class="myUoBDrawer" data-role="drawer" data-swipe-to-open="true" id="events-drawer" style="width: 240px; display:none;" data-position="right" data-views="['tabstrip-events']" >
        <h3>Events filters</h3>
            <ul data-role="listview" id="events-filters" data-style="inset">
 
                        <li><label><input id="student-events-switch" />Student Events</label></li>
                        <li><label><input id="sport-events-switch" />Sport Events</label></li>
                        <li><label><input id="performance-events-switch" />Performance</label></li>                        
                        <li><label><input id="exhibition-events-switch" />Exhibitions</label></li>
                        <li><label><input id="lecture-events-switch" />Lectures & Talks</label></li>                        
            </ul> 
    </div>
    
    
    <!--Layouts-->
    <div data-role="layout" data-id="tabstrip-layout">

        <!--Header-->
        <div data-role="header">
            <div data-role="navbar">
                <a class="nav-button" data-align="left" data-role="backbutton">Back</a>
                <span data-role="view-title"></span>
            </div>
        </div>

        <!--Footer-->
        <div data-role="footer">
            <div data-role="tabstrip">
                <a href="#tabstrip-home" data-icon="home">Home</a>
                <a href="#tabstrip-alerts" data-icon="exclamation" data-transition="slide">Alerts</a>
                <a href="#tabstrip-settings" data-icon="settings" data-transition="slide">Settings</a>
                <a href="#tabstrip-info" data-icon="info" data-transition="slide">Info</a>
            </div>
        </div>
    </div>
    
    <div data-role="layout" data-id="tabstrip-layout-news">
        <!--Header-->
        <div data-role="header">
            <div data-role="navbar">
                <a class="nav-button" data-align="left" data-role="backbutton">Back</a>
                
                <span data-role="view-title"></span>
                <a data-align="right" id="news-drawer-button" data-role="button" data-rel="drawer" href="#news-drawer" data-icon="drawer-button" title="View News Filters"></a>
            </div>
        </div>
        <!--Footer-->
        <div data-role="footer">
            <div data-role="tabstrip">
                <a href="#tabstrip-home" data-icon="home">Home</a>
                <a href="#tabstrip-alerts" data-icon="exclamation" data-transition="slide">Alerts</a>
                <a href="#tabstrip-settings" data-icon="settings" data-transition="slide">Settings</a>
                <a href="#tabstrip-info" data-icon="info" data-transition="slide">Info</a>
            </div>
        </div>
    </div>
    
    <div data-role="layout" data-id="tabstrip-layout-events">
        <!--Header-->
        <div data-role="header">
            <div data-role="navbar">
                <a class="nav-button" data-align="left" data-role="backbutton">Back</a>
                <span data-role="view-title"></span>
                <a data-align="right" id="news-drawer-button" data-role="button" data-rel="drawer" href="#events-drawer" data-icon="drawer-button" title="View Events Filters"></a>
            </div>
        </div>
        <!--Footer-->
        <div data-role="footer">
            <div data-role="tabstrip">
                <a href="#tabstrip-home" data-icon="home">Home</a>
    			<a href="#tabstrip-alerts" data-icon="exclamation" data-transition="slide">Alerts</a>
                <a href="#tabstrip-settings" data-icon="settings" data-transition="slide">Settings</a>
                <a href="#tabstrip-info" data-icon="info" data-transition="slide">Info</a>
            </div>
        </div>
    </div>
    <!-- Layouts End -->
    
    <script src="scripts/templateLoader.js"></script>
    <script>
        //load templates
        templateLoader.loadExtTemplate("templates/news.tmpl.html");
        templateLoader.loadExtTemplate("templates/events.tmpl.html");
        templateLoader.loadExtTemplate("templates/tweets.tmpl.html");
        templateLoader.loadExtTemplate("templates/friendface.tmpl.html");
        templateLoader.loadExtTemplate("templates/buildings.tmpl.html");
        templateLoader.loadExtTemplate("templates/alerts.tmpl.html");
        
    </script>
    
    <script>
        app.application = new kendo.mobile.Application(document.body, { 
            layout: "tabstrip-layout",
            //let's try a skin
            skin: "flat"
        });
		$(document).ready(function () {
            
    });
    </script>
    
</body>
</html>